<!DOCTYPE HTML>
<html lang="ru-RU" class="no-js">
  <head>
    <title>Календарь / SkyCampus</title>
    <!--#include virtual="/views/layouts/_head.html" -->
  </head>
  <body>
    <!--#include virtual="/views/layouts/_alerts.html" -->
    <!--#include virtual="/views/layouts/_header.html" -->
    <!--#include virtual="/views/layouts/_sidebar.html" -->
    <!--#include virtual="/views/calendar/common/_navigation.html" -->
    <section id="section" class="section" role="main">
      <div class="ctn">
        <div class="cols">
          <div class="cols-9 mod">

            <div id="calendar"></div>

          </div>
        </div>
      </div>
    </section>
    <!--#include virtual="/views/layouts/_footer.html" -->

    <script type="text/javascript">
      $(function() {

        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();
        
        $('#calendar').fullCalendar({
          header: {
            left: '',
            center: 'title',
            right: ''
          },
          firstDay: 1,
          defaultView: 'basicWeek',
          editable: true,
          monthNames: ['Январь','Февраль','Март','Апрель','Май','Июнь','Июль','Август','Сентябрь','Октябрь','Ноябрь','Декабрь'],
          monthNamesShort: ['Янв.','Фев.','Март','Апр.','Май','Июнь','Июль','Авг.','Сент.','Окт.','Ноя.','Дек.'],
          dayNames: ['Воскресенье','Понедельник','Вторник','Среда','Четверг','Пятница','Суббота'],
          dayNamesShort: ['ВС','ПН','ВТ','СР','ЧТ','ПТ','СБ'], 
          events: [
            {
              title: 'All Day Event',
              start: new Date(y, m, 1)
            },
            {
              title: 'Long Event',
              start: new Date(y, m, d-5),
              end: new Date(y, m, d-2)
            },
            {
              id: 999,
              title: 'Repeating Event',
              start: new Date(y, m, d-3, 16, 0),
              allDay: false
            },
            {
              id: 999,
              title: 'Repeating Event',
              start: new Date(y, m, d+4, 16, 0),
              allDay: false
            },
            {
              title: 'Meeting',
              start: new Date(y, m, d, 10, 30),
              allDay: false
            },
            {
              title: 'Lunch',
              start: new Date(y, m, d, 12, 0),
              end: new Date(y, m, d, 14, 0),
              allDay: false
            },
            {
              title: 'Birthday Party',
              start: new Date(y, m, d+1, 19, 0),
              end: new Date(y, m, d+1, 22, 30),
              allDay: false
            },
            {
              title: 'Click for Google',
              start: new Date(y, m, 28),
              end: new Date(y, m, 29),
              url: 'http://google.com/'
            }
          ]
        });

        getTitle(); // to-do: найти калюак типо onLoad и перевесит туда

        // Next & Prev click
        $('#nav').find('.nav_a').click(function() {
          $('#calendar').fullCalendar($(this).data('nav'));
          getTitle();
          return false;
        });

        // Today click
        $('#today-button').click(function() {
          $('#calendar').fullCalendar('today');
          getTitle();
          return false;
        });        

        // View click
        $('#calendar-view').find('.nav_menu_i_a').click(function() {
          var view = $(this).data('view');
          $('#calendar').fullCalendar('changeView', view);
          $('.nav_menu').find('.__current').removeClass('__current');
          $(this).addClass('__current');
          getTitle();
          return false;
        });

        function getTitle() {
          var view = $('#calendar').fullCalendar('getView');
          $('#nav').find('.nav_current').html(view.title);  
        }

      });
    </script>

  </body>
</html>